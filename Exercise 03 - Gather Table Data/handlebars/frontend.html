<script runat="server">
    // Set Datasource Name
    let datasourceName = "Internal Datastore";
    // Create Handlebars Context
    let context = {};
    // Generate SQL Query
    let sql = "SELECT * FROM store_optimisation.users;";
    // Run SQL and add to context
    context.users = JSON.parse(datasource.select(datasourceName, sql));
    // Apply context to the template
    template.context(context);
</script>

<div class="container">
    <h1>Select users from table</h1>
    <hr />
    <table class="table table-borderless table-striped">
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>City</th>
                <th>Role</th>
            </tr>
        </thead>
        <tbody>
            {{#each users}}
                <tr>
                    <td>{{ users_id }}</td>
                    <td>{{ users_name }}</td>
                    <td>{{ users_city }}</td>
                    <td>{{ users_role }}</td>
                </tr>
            {{/each}}
        </tbody>
    </table>
</div>
